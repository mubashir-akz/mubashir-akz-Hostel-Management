<link rel="stylesheet" href="/css/guest/style.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

<div class="login-form">
    <form action="/guest-register" method="post">
        <h2 class="text-center">Register</h2>
        <div class="text-center social-btn">
            <a href="/auth/facebook" class="btn btn-primary btn-block"><i class="fa fa-facebook"></i> Register in with
                <b>Facebook</b></a>
            <a href="#" class="btn btn-info btn-block"><i class="fa fa-twitter"></i> Register in with <b>Twitter</b></a>
            <a href="/google" class="btn btn-danger btn-block"><i class="fa fa-google"></i> Register in with
                <b>Google</b></a>
        </div>
        <div class="or-seperator"><i>or</i></div>
        <div class="form-group">
            <div>
                <div class="alert alert-danger alert-dismissible" style="display: none;" id="alert">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    <strong>E-mail </strong> already taken
                </div>
            </div>
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text">
                        <span class="fa fa-at"></span>
                    </span>
                </div>
                <input type="email" class="form-control" id="email" name="email" placeholder="Email"
                    required="required">
            </div>
        </div>
        <div class="form-group">
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text">
                        <span class="fa fa-user"></span>
                    </span>
                </div>
                <input type="text" class="form-control" id="username" name="username" placeholder="Username"
                    required="required">
            </div>
        </div>
        <div class="form-group">
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text">
                        <i class="fa fa-lock"></i>
                    </span>
                </div>
                <input type="password" class="form-control" id="password" name="password" placeholder="Password"
                    required="required">
            </div>
        </div>
        <div class="form-group">
            <button type="button" onclick="validating(1)" class="btn btn-success btn-block login-btn">Register</button>
        </div>
        <div class="clearfix">
            <a href="#" class="float-right text-success">Forgot Password?</a>
        </div>

    </form>
    <div class="hint-text">Already have an account ..?<a href="/" class="text-success">Sign In Now!</a></div>
</div>

{{!--
<script src="javscript/guest-login.js"></script> --}}

<script>
    function validating(m) {
        let email = document.getElementById('email').value
        let username = document.getElementById('username').value
        let password = document.getElementById('password').value
        console.log(email, username, password)
        $.ajax({
            url: '/guest-register',
            data: {
                email,
                username,
                password
            },
            method: 'post',
            success: (res) => {
                console.log(res.var)
                if (res.var == false) {
                    document.getElementById('alert').style.display = 'block'
                } else {
                    window.location.href = '/'
                }
            }
        })
    }
</script>